
{% extends "base.html" %}
{% block title %}Boutique {{ boutique.nom }}{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">{{ boutique.nom }}</h1>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-white rounded shadow p-4">
        <p class="text-sm text-gray-500">Gérant</p>
        <p class="font-semibold">{{ boutique.gerant or '-' }}</p>
        <p class="text-sm text-gray-500 mt-2">Email : {{ boutique.email }}</p>
        <p class="text-sm text-gray-500">Téléphone : {{ boutique.telephone or '-' }}</p>
    </div>
    <div class="bg-white rounded shadow p-4">
        <p class="text-sm text-gray-500">CA total</p>
        <p class="text-2xl font-bold">{{ '%.2f'|format(total_ca) }} €</p>
        <p class="text-sm text-gray-500 mt-2">Nombre de devis : {{ nb_devis }}</p>
    </div>
    <div class="bg-white rounded shadow p-4">
        <p class="text-sm text-gray-500">Taux d'acceptation</p>
        <p class="text-2xl font-bold">{{ '%.1f'|format(taux_acceptation) }} %</p>
        <p class="text-sm text-gray-500 mt-2">Devis acceptés : {{ nb_acceptes }}</p>
    </div>
</div>

<h2 class="text-xl font-semibold mb-2">Devis de la boutique</h2>
<div class="bg-white rounded shadow overflow-hidden">
    <table class="min-w-full text-sm">
        <thead class="bg-gray-50">
        <tr>
            <th class="px-4 py-2 text-left">Référence</th>
            <th class="px-4 py-2 text-left">Date</th>
            <th class="px-4 py-2 text-left">Statut</th>
            <th class="px-4 py-2 text-left">Montant</th>
        </tr>
        </thead>
        <tbody>
        {% for d in devis %}
            <tr class="border-t">
                <td class="px-4 py-2">{{ boutique.nom }}-#{{ d.numero_boutique }}</td>
                <td class="px-4 py-2">{{ d.date_creation.strftime('%Y-%m-%d') if d.date_creation else '' }}</td>
                <td class="px-4 py-2">{{ d.statut.value }}</td>
                <td class="px-4 py-2">{{ '%.2f'|format(d.prix_total) }} €</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
